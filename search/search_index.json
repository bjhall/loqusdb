{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"loqusdb Software to setup and manage local variant observations database. Right now locusdb uses mongodb as backend for storing variants but it should be doable to adapt the code to another backend. Installation Idea To keep track of what variants that have been seen, in what families and what state they have been observed. This is NOT a tool to create a true frequency database. loqusdb will basically count the number of times we have seen a variant in any individual. Loqusdb will keep track of the variants that have been seen in a homozygous or hemizygous state. It is used both as a live resource that continuously gets filled with new information and can be queried at any time. One could also create a vcf export to annotate new variants. Variants are stored by providing a vcf file and a (ped or ped like)family file. Loqusdb will first check if the vcf file looks ok, then check all variants if they have been observed in any of the individuals in the family. How variants are added: Either the variant exists, in this case we increase the number of observations with one Or this variant has not ben seen before, then the variant is added to database SNVs and SVs Previously loqusdb could only handle SNVs and INDELs, from now on it is also capable of handling structural variants. Since structural variants have lower call quality than snvs they need to be regarded as inexact calls. These are therefore grouped into clusters with some extensions, intervals, around the endpoints. The interval size is a function of the size of the SV. Sample profiling Loqusdb supports profiling of the samples loaded into the database. This is made to prevent the same sample to be loaded into the database more than once. The profiling is made by assessing the genotypes of each sample for a given set of SNPs with high minor allele frequency. If the profile of a sample is too similar to that of an existing sample, the case will not be loaded.","title":"Home"},{"location":"#loqusdb","text":"Software to setup and manage local variant observations database. Right now locusdb uses mongodb as backend for storing variants but it should be doable to adapt the code to another backend. Installation","title":"loqusdb"},{"location":"#idea","text":"To keep track of what variants that have been seen, in what families and what state they have been observed. This is NOT a tool to create a true frequency database. loqusdb will basically count the number of times we have seen a variant in any individual. Loqusdb will keep track of the variants that have been seen in a homozygous or hemizygous state. It is used both as a live resource that continuously gets filled with new information and can be queried at any time. One could also create a vcf export to annotate new variants. Variants are stored by providing a vcf file and a (ped or ped like)family file. Loqusdb will first check if the vcf file looks ok, then check all variants if they have been observed in any of the individuals in the family.","title":"Idea"},{"location":"#how-variants-are-added","text":"Either the variant exists, in this case we increase the number of observations with one Or this variant has not ben seen before, then the variant is added to database","title":"How variants are added:"},{"location":"#snvs-and-svs","text":"Previously loqusdb could only handle SNVs and INDELs, from now on it is also capable of handling structural variants. Since structural variants have lower call quality than snvs they need to be regarded as inexact calls. These are therefore grouped into clusters with some extensions, intervals, around the endpoints. The interval size is a function of the size of the SV.","title":"SNVs and SVs"},{"location":"#sample-profiling","text":"Loqusdb supports profiling of the samples loaded into the database. This is made to prevent the same sample to be loaded into the database more than once. The profiling is made by assessing the genotypes of each sample for a given set of SNPs with high minor allele frequency. If the profile of a sample is too similar to that of an existing sample, the case will not be loaded.","title":"Sample profiling"},{"location":"install/","text":"Installation Install mongo db then do any of these: pip install loqusdb or $git clone https://github.com/moonso/loqusdb $cd loqusdb $pip install --editable . make sure you have a mongod process running before starting loqusdb","title":"Install"},{"location":"install/#installation","text":"Install mongo db then do any of these: pip install loqusdb or $git clone https://github.com/moonso/loqusdb $cd loqusdb $pip install --editable . make sure you have a mongod process running before starting loqusdb","title":"Installation"},{"location":"admin-guide/","text":"Admin Guide This section will include documentation for admins and developers Dump database Restore database","title":"Admin Guide"},{"location":"admin-guide/#admin-guide","text":"This section will include documentation for admins and developers Dump database Restore database","title":"Admin Guide"},{"location":"admin-guide/dump/","text":"Dumping a database Loqus have a command to dump a database to a zipped file. This command just wraps the mongo command dump with some defaults. $loqusdb dump --help Usage: loqusdb dump [OPTIONS] Dump the database to a zipped file. Default filename is loqusdb.<todays date>.gz (e.g loqusdb.19971004.gz) Options: -f, --filename PATH If custom named file is to be used --help Show this message and exit.","title":"Dumping a database"},{"location":"admin-guide/dump/#dumping-a-database","text":"Loqus have a command to dump a database to a zipped file. This command just wraps the mongo command dump with some defaults. $loqusdb dump --help Usage: loqusdb dump [OPTIONS] Dump the database to a zipped file. Default filename is loqusdb.<todays date>.gz (e.g loqusdb.19971004.gz) Options: -f, --filename PATH If custom named file is to be used --help Show this message and exit.","title":"Dumping a database"},{"location":"admin-guide/restore/","text":"Restore a database It is possible to load all information from a dumped loqusdb instance. This command just wraps the mongo command mongo restore Loqusdb is shipped with a database instance that includes structural variants from ~740 1000G individuals. Those have been called with manta , tiddit and CNVnator and the calls are merged with svdb . If no file is pointed at loqusdb restore will use this database as default. Usage: loqusdb restore [OPTIONS] Restore the database from a zipped file. Default is to restore from db dump in loqusdb/resources/ Options: -f, --filename PATH If custom named file is to be used --help Show this message and exit.","title":"Restore a database"},{"location":"admin-guide/restore/#restore-a-database","text":"It is possible to load all information from a dumped loqusdb instance. This command just wraps the mongo command mongo restore Loqusdb is shipped with a database instance that includes structural variants from ~740 1000G individuals. Those have been called with manta , tiddit and CNVnator and the calls are merged with svdb . If no file is pointed at loqusdb restore will use this database as default. Usage: loqusdb restore [OPTIONS] Restore the database from a zipped file. Default is to restore from db dump in loqusdb/resources/ Options: -f, --filename PATH If custom named file is to be used --help Show this message and exit.","title":"Restore a database"},{"location":"user-guide/","text":"loqusdb user guide loqusdb is a tool to store and query snv/indel and sv variants on a large scale. It can be continuously updated with information and queried with positions or regions. Observations As mentioned loqusdb is not a frequency database that keeps track of all alleles observed in a population. Instead loqusdb is used to keep track of what variants that have been observed, in what state they where observed and in what individuals or families they where observed. loqusdb was developed to aid in rare variant analysies and therefore information about single variants are extremely important. If for example there is a potentially disease causing variant in a patient we could ask loqusdb if it has been observed before, if loqusdb then tells us that it has been observed in a homozygous state 2 times before we could either exclude the variant or solve 2 more cases. Counting observations Variants are only counted once per family, regardless of how many individuals it was observed in. This is to avoid the situation where a large family could have a great impact on a rare variant. Usage Loading Deleting Exporting Annotating Profiling","title":"User Guide"},{"location":"user-guide/#loqusdb-user-guide","text":"loqusdb is a tool to store and query snv/indel and sv variants on a large scale. It can be continuously updated with information and queried with positions or regions.","title":"loqusdb user guide"},{"location":"user-guide/#observations","text":"As mentioned loqusdb is not a frequency database that keeps track of all alleles observed in a population. Instead loqusdb is used to keep track of what variants that have been observed, in what state they where observed and in what individuals or families they where observed. loqusdb was developed to aid in rare variant analysies and therefore information about single variants are extremely important. If for example there is a potentially disease causing variant in a patient we could ask loqusdb if it has been observed before, if loqusdb then tells us that it has been observed in a homozygous state 2 times before we could either exclude the variant or solve 2 more cases.","title":"Observations"},{"location":"user-guide/#counting-observations","text":"Variants are only counted once per family, regardless of how many individuals it was observed in. This is to avoid the situation where a large family could have a great impact on a rare variant. Usage Loading Deleting Exporting Annotating Profiling","title":"Counting observations"},{"location":"user-guide/annotating/","text":"Annotating variants Loqusdb can annotate a VCF with observations from an instance. Use command: Usage: loqusdb annotate [OPTIONS] <vcf_file> Annotate the variants in a VCF Options: --sv --help Show this message and exit.","title":"Annotating variants"},{"location":"user-guide/annotating/#annotating-variants","text":"Loqusdb can annotate a VCF with observations from an instance. Use command: Usage: loqusdb annotate [OPTIONS] <vcf_file> Annotate the variants in a VCF Options: --sv --help Show this message and exit.","title":"Annotating variants"},{"location":"user-guide/deleting/","text":"Delete a case When a case is deleted all observations from the case in question will be deleted. Deleting a case is done in the same way as loading a case using the following command: $loqusdb delete <VCF> -f <FAM_file>","title":"Delete a case"},{"location":"user-guide/deleting/#delete-a-case","text":"When a case is deleted all observations from the case in question will be deleted. Deleting a case is done in the same way as loading a case using the following command: $loqusdb delete <VCF> -f <FAM_file>","title":"Delete a case"},{"location":"user-guide/exporting/","text":"Exporting variants The variant can be exported with observations to the VCF format. This might come to use when annotating variants for analysis of new cases. Since SNVs and SVs differs so much there are two different files for these. Use command: $loqusdb export or for SV variants $loqusdb export --variant-type sv","title":"Exporting variants"},{"location":"user-guide/exporting/#exporting-variants","text":"The variant can be exported with observations to the VCF format. This might come to use when annotating variants for analysis of new cases. Since SNVs and SVs differs so much there are two different files for these. Use command: $loqusdb export or for SV variants $loqusdb export --variant-type sv","title":"Exporting variants"},{"location":"user-guide/loading/","text":"Load a case Variants are loaded in a case context, this is so that we can trace back where we have observed a variation. VCF files usually does not hold family information, this is why we use a ped file. When loading a case for the first time one could do any of the following: Load a case with a SNV file Load a case with a SV file Load a case with a SNV file and a SV file It is possible to add a file after a case is loaded with loqusdb update A case is loaded with: $loqusdb load --help Usage: loqusdb load [OPTIONS] Load the variants of a case A variant is loaded if it is observed in any individual of a case If no family file is provided all individuals in vcf file will be considered. Options: --variant-file <vcf_file> Load a VCF with SNV/INDEL Variants --sv-variants <sv_vcf_file> Load a VCF with Structural Variants -f, --family-file <ped_file> -t, --family-type [ped|alt|cmms|mip] If the analysis use one of the known setups, please specify which one. [default: ped] -c, --case-id TEXT If a different case id than the one in ped file should be used -s, --skip-case-id Do not store case information on variants [default: False] --ensure-index Make sure that the indexes are in place --gq-treshold INTEGER Treshold to consider variant [default: 20] -m, --max-window INTEGER Specify the maximum window size for svs [default: 2000] --check-profile PATH Apply sample profiling for the samples, using the variants in this vcf --hard-threshold FLOAT profile hamming distance to rejecting load (0-1) --soft-threshold FLOAT profile hamming distance to store similar individuals (0-1) --help Show this message and exit. loqusdb will check that the individuals in ped file exists in vcf file and then add all the variants to database.","title":"Loading"},{"location":"user-guide/loading/#load-a-case","text":"Variants are loaded in a case context, this is so that we can trace back where we have observed a variation. VCF files usually does not hold family information, this is why we use a ped file. When loading a case for the first time one could do any of the following: Load a case with a SNV file Load a case with a SV file Load a case with a SNV file and a SV file It is possible to add a file after a case is loaded with loqusdb update A case is loaded with: $loqusdb load --help Usage: loqusdb load [OPTIONS] Load the variants of a case A variant is loaded if it is observed in any individual of a case If no family file is provided all individuals in vcf file will be considered. Options: --variant-file <vcf_file> Load a VCF with SNV/INDEL Variants --sv-variants <sv_vcf_file> Load a VCF with Structural Variants -f, --family-file <ped_file> -t, --family-type [ped|alt|cmms|mip] If the analysis use one of the known setups, please specify which one. [default: ped] -c, --case-id TEXT If a different case id than the one in ped file should be used -s, --skip-case-id Do not store case information on variants [default: False] --ensure-index Make sure that the indexes are in place --gq-treshold INTEGER Treshold to consider variant [default: 20] -m, --max-window INTEGER Specify the maximum window size for svs [default: 2000] --check-profile PATH Apply sample profiling for the samples, using the variants in this vcf --hard-threshold FLOAT profile hamming distance to rejecting load (0-1) --soft-threshold FLOAT profile hamming distance to store similar individuals (0-1) --help Show this message and exit. loqusdb will check that the individuals in ped file exists in vcf file and then add all the variants to database.","title":"Load a case"},{"location":"user-guide/profiling/","text":"Profile samples To ensure that there are no sample duplicates in the database, the profiling feature can be used. Profiling of samples is based on a list of SNPs, having a high minor allele frequency (MAF). Each sample loaded into the database will assessed for its genotype on these variant positions. This list of SNPs are chosen and loaded to the database by the user. The user can load a custom set of high MAF SNPs that will be used in profiling. Upon loading a new case, the user choses to activate the profiling feature with the --check-profile option when loading . Here the user provides a VCF file that contains variant calls for each of the predefined high-MAF SNPs. If no call is found for a SNP, the sample will be assumed to be homozygous for the reference allele at this position. The user may define a --hard-threshold, meaning if any existing profile has a similarity greater than this (based on the hamming distance between compared profiles) to any of the loaded samples, the case will not be loaded. Similarly a --soft-threshold can be set, meaning if any similarity greater than this is found, the case may still be loaded, but the similar samples in the database will be stated for the loaded samples. $loqusdb profile --help Usage: loqusdb profile [OPTIONS] Command for profiling of samples. User may upload variants used in profiling from a vcf, update the profiles for all samples, and get some stats from the profiles in the database. Profiling is used to monitor duplicates in the database. The profile is based on the variants in the 'profile_variant' collection, assessing the genotypes for each sample at the position of these variants. Options: --variant-file PATH a vcf containing the SNPs that is used in profiling --update updates the profiles of all the sample in the database --stats Checks some statistics of the profiles in the database --profile-threshold FLOAT Used with --stats option to determine the number of matching profiles with a similarity greater than given threshold --help Show this message and exit.","title":"Profiling"},{"location":"user-guide/profiling/#profile-samples","text":"To ensure that there are no sample duplicates in the database, the profiling feature can be used. Profiling of samples is based on a list of SNPs, having a high minor allele frequency (MAF). Each sample loaded into the database will assessed for its genotype on these variant positions. This list of SNPs are chosen and loaded to the database by the user. The user can load a custom set of high MAF SNPs that will be used in profiling. Upon loading a new case, the user choses to activate the profiling feature with the --check-profile option when loading . Here the user provides a VCF file that contains variant calls for each of the predefined high-MAF SNPs. If no call is found for a SNP, the sample will be assumed to be homozygous for the reference allele at this position. The user may define a --hard-threshold, meaning if any existing profile has a similarity greater than this (based on the hamming distance between compared profiles) to any of the loaded samples, the case will not be loaded. Similarly a --soft-threshold can be set, meaning if any similarity greater than this is found, the case may still be loaded, but the similar samples in the database will be stated for the loaded samples. $loqusdb profile --help Usage: loqusdb profile [OPTIONS] Command for profiling of samples. User may upload variants used in profiling from a vcf, update the profiles for all samples, and get some stats from the profiles in the database. Profiling is used to monitor duplicates in the database. The profile is based on the variants in the 'profile_variant' collection, assessing the genotypes for each sample at the position of these variants. Options: --variant-file PATH a vcf containing the SNPs that is used in profiling --update updates the profiles of all the sample in the database --stats Checks some statistics of the profiles in the database --profile-threshold FLOAT Used with --stats option to determine the number of matching profiles with a similarity greater than given threshold --help Show this message and exit.","title":"Profile samples"},{"location":"user-guide/usage/","text":"","title":"Usage"}]}